<ui:FluentWindow
    x:Class="Modrix.Views.Windows.NewProject"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Modrix.Views.Windows"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="New Minecraft Mod Project"
    Width="500"
    Height="462"
    d:DesignWidth="500"
    ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
    ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    ExtendsContentIntoTitleBar="True"
    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    WindowBackdropType="Mica"
    WindowCornerPreference="Round"
    WindowStartupLocation="CenterOwner"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <ui:TitleBar
            Title="New Project"
            Grid.Row="0"
            Icon="Add24">
        </ui:TitleBar>

        <Grid Grid.Row="1" Margin="0,0,0,10">
            <ScrollViewer 
                VerticalScrollBarVisibility="Auto" 
                HorizontalScrollBarVisibility="Disabled">
                <StackPanel Margin="42,32,42,20">
                    <!-- Project Name -->
                    <TextBlock 
                        Margin="0,0,0,4"
                        FontWeight="Medium" 
                        Text="Project Name" />
                    <ui:TextBox
                        x:Name="ProjectNameBox"
                        Margin="0,0,0,16"
                        PlaceholderText="Project Name"
                        Icon="Edit24"
                        ToolTip="The display name of your mod"/>

                    <!-- Mod ID -->
                    <TextBlock 
                        Margin="0,0,0,4"
                        FontWeight="Medium" 
                        Text="Mod ID" />
                    <ui:TextBox
                        x:Name="ModIdBox"
                        Margin="0,0,0,16"
                        PlaceholderText="mod_id"
                        Icon="Document24"
                        ToolTip="Unique identifier for your mod (lowercase, no spaces)"/>

                    <!-- Package -->
                    <TextBlock 
                        Margin="0,0,0,4"
                        FontWeight="Medium" 
                        Text="Package" />
                    <ui:TextBox
                        x:Name="PackageBox"
                        Margin="0,0,0,16"
                        PlaceholderText="net.modrix.mymod"
                        Icon="Box24"
                        ToolTip="Java package name for your mod"/>

                    <!-- Mod Type -->
                    <TextBlock 
                        Margin="0,0,0,4"
                        FontWeight="Medium" 
                        Text="Mod Type" />
                    <ui:CardControl
                        ToolTip="Choose your mod's platform"
                        Margin="0,0,0,16">
                        <ui:CardControl.Content>
                            <ComboBox
                                x:Name="ModTypeComboBox"
                                Width="371"
                                MinWidth="200">
                                
                                <ComboBoxItem Content="Forge Mod" />
                                <ComboBoxItem Content="Fabric Mod" />
                            </ComboBox>
                        </ui:CardControl.Content>
                    </ui:CardControl>

                    <!-- Minecraft Version -->
                    <TextBlock 
                        Margin="0,0,0,4"
                        FontWeight="Medium" 
                        Text="Minecraft Version" />
                    <ui:CardControl
                        ToolTip="Select the Minecraft version for your mod"
                        Margin="0,0,0,16">
                        <ui:CardControl.Content>
                            <ComboBox
                                x:Name="MinecraftVersionComboBox"
                                Width="371"
                                MinWidth="200">
                                <ComboBoxItem Content="1.21.4" />
                                
                            </ComboBox>
                        </ui:CardControl.Content>
                    </ui:CardControl>

                    <TextBlock 
                        Margin="0,0,0,4"
                        FontWeight="Medium" 
                        Text="License (Optional)" />
                    <ui:CardControl
                            ToolTip="Choose a license for your mod"
                            Margin="0,0,0,16">
                        <ui:CardControl.Content>
                            <ComboBox
                                 x:Name="LicenseComboBox"
                                IsEditable="True"
                                Width="371"
                                MinWidth="200">
                                <ComboBoxItem Content="MIT License" />
                                <ComboBoxItem Content="GNU Lesser General Public License v3.0 (LGPL-3.0)" />
                                <ComboBoxItem Content="GNU General Public License v3.0 (GPL-3.0)" />
                                <ComboBoxItem Content="Apache License 2.0" />
                                <ComboBoxItem Content="Mozilla Public License 2.0" />
                                <ComboBoxItem Content="All Rights Reserved" />
                                <ComboBoxItem Content="Custom License" />
                            </ComboBox>
                        </ui:CardControl.Content>
                    </ui:CardControl>

                    <!-- Description -->
                    <TextBlock 
                        Margin="0,0,0,4"
                        FontWeight="Medium" 
                        Text="Description (Optional)" />
                    <ui:TextBox
                        x:Name="DescriptionBox"
                        Margin="0,0,0,16"
                        PlaceholderText="A brief description of your mod"
                        Icon="Comment24"
                        ToolTip="Describe what your mod does"
                        TextWrapping="Wrap"
                        AcceptsReturn="True"
                        Height="80"
                        VerticalContentAlignment="Top"/>


                 

                    <!-- Authors -->
                    <TextBlock 
                        Margin="0,0,0,4"
                        FontWeight="Medium" 
                        Text="Authors (Optional)" />
                    <ui:TextBox
                        x:Name="AuthorsBox"
                        Margin="0,0,0,16"
                        PlaceholderText="Comma-separated list of authors"
                        Icon="People24"
                        ToolTip="List the authors of the mod (comma-separated)"/>


                    <!-- Project Icon section (after Location section) -->
                    <TextBlock 
                        Margin="0,0,0,4"
                        FontWeight="Medium" 
                        Text="Project Icon (Optional)" />
                    <Grid x:Name="IconSection" Margin="0,0,0,16">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="48"/>
                            <!-- For the icon/button -->
                            <ColumnDefinition Width="Auto"/>
                            <!-- For the additional buttons -->
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Initial Select Button (Visible when no icon selected) -->
                        <ui:Button
                            x:Name="SelectIconButton"
                            Grid.Column="0"
                            Width="48"
                            Height="48"
                            Icon="Image24"
                            Appearance="Secondary"
                            Click="SelectIconButton_Click"
                            ToolTip="Select a PNG file for your mod's icon"/>

                        <!-- Icon Preview (Hidden initially) -->
                        <Image
                            x:Name="IconPreview"
                            Grid.Column="0"
                            Width="48"
                            Height="48"
                            Visibility="Collapsed"
                            RenderOptions.BitmapScalingMode="HighQuality"/>

                        <!-- Control Buttons (Hidden initially) -->
                        <StackPanel
                            x:Name="IconControls"
                            Grid.Column="1"
                            Margin="8,0,0,0"
                            Orientation="Horizontal"
                            Visibility="Collapsed">

                            <ui:Button
                            x:Name="SwitchIconButton"
                            Margin="0,0,8,0"
                            Icon="ArrowRepeatAll24"
                            Content="Switch Icon"
                            Click="SwitchIconButton_Click"
                            ToolTip="Change the selected icon"/>

                            <ui:Button
                            x:Name="RemoveIconButton"
                            Icon="Delete24"
                            Content="Remove Icon"
                            Appearance="Danger"
                            Click="RemoveIconButton_Click"
                            ToolTip="Remove the selected icon"/>
                        </StackPanel>
                    </Grid>

                    <!-- Other -->
                    <TextBlock 
                        Margin="0,0,0,4"
                        FontWeight="Medium" 
                        Text="Other" />
                    <CheckBox
                        x:Name="IncludeReadmeCheckbox"
                        Margin="0,0,0,16"
                        Content="Add README.md File"
                        ToolTip="Include README.md file on the project template?"/>
                </StackPanel>
                
                
            </ScrollViewer>
            <ui:DynamicScrollBar 
                HorizontalAlignment="Right" 
                VerticalAlignment="Stretch" />
        </Grid>

        <!-- Button Panel -->
        <Grid 
            Grid.Row="2" 
            Margin="42,0,42,24">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <ui:Button
                Grid.Column="1"
                ToolTip="Close without creating a project"
                Margin="0,0,8,0"
                Appearance="Secondary"
                Content="Cancel"
                Icon="Dismiss24"
                Click="CancelButton_Click"/>

            <ui:Button
                Grid.Column="2"
                Appearance="Primary"
                Content="Create"
                Icon="Add24"
                Click="CreateButton_Click"
                IsEnabled="{Binding AreFieldsValid}"
                ToolTip="Create a new mod project with these settings"/>
        </Grid>
    </Grid>
</ui:FluentWindow>
